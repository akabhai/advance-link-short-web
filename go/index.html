<!DOCTYPE html>
<html>
<head>
    <title>Redirecting...</title>
    <style>
        body { font-family: sans-serif; display: flex; justify-content: center; align-items: center; height: 100vh; background: #f4f4f4; }
        .loader { border: 4px solid #f3f3f3; border-top: 4px solid #3498db; border-radius: 50%; width: 40px; height: 40px; animation: spin 2s linear infinite; }
        @keyframes spin { 0% { transform: rotate(0deg); } 100% { transform: rotate(360deg); } }
    </style>
</head>
<body>
    <div id="msg text-align: center">
        <div class="loader"></div>
        <p id="status">Verifying link...</p>
    </div>

    <script>
        const BLOGGER_1_URL = "https://yourblog1.blogspot.com/"; // CHANGE THIS

        async function resolve() {
            const alias = window.location.hash.substring(1);
            if(!alias) { document.getElementById('status').innerText = "Error: No ID provided."; return; }

            // Anti-bot basic
            if(navigator.webdriver) { document.getElementById('status').innerText = "Bots not allowed."; return; }

            try {
                const response = await fetch('links.json');
                const data = await response.json();
                const linkData = data[alias];

                if(linkData && linkData.active) {
                    const expiry = new Date(linkData.expiry);
                    if(expiry < new Date()) {
                        document.getElementById('status').innerText = "Error: Link expired.";
                        return;
                    }

                    // Encode URL to hide it from casual view
                    const encodedUrl = btoa(linkData.url);
                    sessionStorage.setItem('init', 'true');
                    window.location.href = `${BLOGGER_1_URL}?d=${encodedUrl}`;
                } else {
                    document.getElementById('status').innerText = "Error: Link not found or disabled.";
                }
            } catch (e) {
                document.getElementById('status').innerText = "Error loading database.";
            }
        }
        resolve();
    </script>
</body>
</html>
